<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FURINA studies with you</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", sans-serif;
      }
      body {
        background: linear-gradient(to right, #50c8b1, #50c8b1);
        background-image: url("furina.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-attachment: fixed;
        background-size: contain;
        min-height: 100vh;
        color: #fff;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      nav {
        position: absolute;
        top: 10px;
        right: 10px;
        z-index: 10;
      }
      .menu-icon {
        font-size: 26px;
        cursor: pointer;
        background: rgba(255, 255, 255, 0.9);
        padding: 8px 12px;
        border-radius: 8px;
        color: black;
      }
      .menu {
        display: none;
        position: absolute;
        top: 45px;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        list-style: none;
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      }
      .menu li {
        padding: 10px 20px;
        cursor: pointer;
        color: black;
      }
      .menu li:hover {
        background: #eee;
      }
      .content {
        display: none;
        text-align: center;
        margin-top: 40px;
        max-width: 500px;
        width: 100%;
      }
      .active {
        display: block;
      }
      h1,
      h2 {
        margin-bottom: 20px;
        font-size: 24px;
        text-shadow: 1px 1px 3px black;
      }
      #vocab-list {
        background: rgba(255, 255, 255, 0.9);
        padding: 20px;
        border-radius: 10px;
        color: black;
        text-align: left;
      }
      .question-box {
        background: rgba(255, 255, 255, 0.95);
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        box-shadow: 0 0 8px rgba(0, 0, 0, 0.2);
        color: black;
      }
      .answers button {
        width: 100%;
        margin: 10px 0;
        padding: 12px;
        font-size: 16px;
        border-radius: 8px;
        border: none;
        background: #eee;
        cursor: pointer;
      }
      .answers button:hover {
        background: #ddd;
      }
      .summary,
      .status-bar {
        margin-top: 20px;
        font-size: 18px;
      }
      .buttons {
        margin-top: 20px;
      }
      .buttons button {
        margin: 5px;
        padding: 10px 15px;
        font-size: 16px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background: white;
        color: black;
      }
      #exit-btn {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(255, 50, 50, 0.9);
        color: white;
        border: none;
        padding: 8px 12px;
        font-size: 16px;
        border-radius: 8px;
        cursor: pointer;
        z-index: 10;
        display: none;
      }
      @media (max-width: 600px) {
        h1,
        h2 {
          font-size: 20px;
        }
        .answers button,
        .menu li {
          font-size: 15px;
        }
      }
    </style>
  </head>
  <body>
    <button id="exit-btn" onclick="showPage('home')">‚ùå Tho√°t</button>
    <nav>
      <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>
      <ul class="menu" id="menu">
        <li onclick="showPage('home')">Trang ch·ªß</li>
        <li onclick="showPage('vocab')">T·ª´ v·ª±ng</li>
        <li onclick="showPage('game')">Luy·ªán t·∫≠p</li>
      </ul>
    </nav>

    <div class="content active" id="home">
      <h1 style="margin-top: 60px">üéì Ch√†o m·ª´ng!</h1>
      <p>Ch·ªçn m·ª•c tr√™n menu ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
    </div>

    <div class="content" id="vocab">
      <h2>üìò Danh s√°ch t·ª´ v·ª±ng</h2>
      <ul id="vocab-list"></ul>
    </div>

    <div class="content" id="game">
      <h2>üß† Tr√≤ ch∆°i luy·ªán t·∫≠p</h2>
      <div class="status-bar" id="status"></div>
      <div class="question-box" id="question-box">
        <div id="question">C√¢u h·ªèi...</div>
        <div class="answers" id="answers"></div>
      </div>
      <div class="summary" id="summary"></div>
      <div class="buttons" id="end-buttons" style="display: none">
        <button onclick="showPage('home')">üè† Trang ch·ªß</button>
        <button onclick="showPage('vocab')">üìò T·ª´ v·ª±ng</button>
        <button onclick="startGame()">üîÅ Ch∆°i l·∫°i</button>
      </div>
    </div>

    <script>
      const words = [
        { en: "apple", vi: "qu·∫£ t√°o" },
        { en: "dog", vi: "con ch√≥" },
        { en: "cat", vi: "con m√®o" },
        { en: "house", vi: "ng√¥i nh√†" },
        { en: "school", vi: "tr∆∞·ªùng h·ªçc" },
        { en: "book", vi: "quy·ªÉn s√°ch" },
        { en: "car", vi: "xe h∆°i" },
        { en: "banana", vi: "qu·∫£ chu·ªëi" },
        { en: "teacher", vi: "gi√°o vi√™n" },
        { en: "student", vi: "h·ªçc sinh" },

        { en: "water", vi: "n∆∞·ªõc" },
        { en: "milk", vi: "s·ªØa" },
        { en: "bread", vi: "b√°nh m√¨" },
        { en: "chair", vi: "gh·∫ø" },
        { en: "table", vi: "b√†n" },
        { en: "window", vi: "c·ª≠a s·ªï" },
        { en: "door", vi: "c√°nh c·ª≠a" },
        { en: "sun", vi: "m·∫∑t tr·ªùi" },
        { en: "moon", vi: "m·∫∑t trƒÉng" },
        { en: "star", vi: "ng√¥i sao" },

        { en: "pen", vi: "b√∫t m·ª±c" },
        { en: "pencil", vi: "b√∫t ch√¨" },
        { en: "notebook", vi: "s·ªï tay" },
        { en: "bag", vi: "c√°i t√∫i" },
        { en: "shirt", vi: "√°o s∆° mi" },
        { en: "pants", vi: "qu·∫ßn d√†i" },
        { en: "shoes", vi: "gi√†y" },
        { en: "hat", vi: "m≈©" },
        { en: "clock", vi: "ƒë·ªìng h·ªì" },
        { en: "phone", vi: "ƒëi·ªán tho·∫°i" },

        { en: "bed", vi: "gi∆∞·ªùng" },
        { en: "pillow", vi: "g·ªëi" },
        { en: "blanket", vi: "chƒÉn" },
        { en: "floor", vi: "s√†n nh√†" },
        { en: "wall", vi: "b·ª©c t∆∞·ªùng" },
        { en: "ceiling", vi: "tr·∫ßn nh√†" },
        { en: "light", vi: "√°nh s√°ng" },
        { en: "fan", vi: "qu·∫°t" },
        { en: "television", vi: "tivi" },
        { en: "computer", vi: "m√°y t√≠nh" },

        { en: "mouse", vi: "chu·ªôt" },
        { en: "keyboard", vi: "b√†n ph√≠m" },
        { en: "doctor", vi: "b√°c sƒ©" },
        { en: "nurse", vi: "y t√°" },
        { en: "hospital", vi: "b·ªánh vi·ªán" },
        { en: "market", vi: "ch·ª£" },
        { en: "restaurant", vi: "nh√† h√†ng" },
        { en: "food", vi: "th·ª©c ƒÉn" },
        { en: "drink", vi: "ƒë·ªì u·ªëng" },
        { en: "juice", vi: "n∆∞·ªõc √©p" },

        { en: "coffee", vi: "c√† ph√™" },
        { en: "tea", vi: "tr√†" },
        { en: "rice", vi: "c∆°m" },
        { en: "fish", vi: "c√°" },
        { en: "chicken", vi: "g√†" },
        { en: "egg", vi: "tr·ª©ng" },
        { en: "meat", vi: "th·ªãt" },
        { en: "vegetable", vi: "rau" },
        { en: "fruit", vi: "tr√°i c√¢y" },
        { en: "soup", vi: "s√∫p" },
      ];

      let currentQuestion = 0,
        lives = 5,
        gameWords = [];

      function toggleMenu() {
        const menu = document.getElementById("menu");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
      }

      function showPage(id) {
        document
          .querySelectorAll(".content")
          .forEach((c) => c.classList.remove("active"));
        document.getElementById(id).classList.add("active");
        document.getElementById("menu").style.display = "none";
        document.getElementById("exit-btn").style.display =
          id === "game" ? "block" : "none";
        if (id === "vocab") showVocab();
        if (id === "game") startGame();
      }

      function showVocab() {
        const list = document.getElementById("vocab-list");
        list.innerHTML = "";
        words.forEach((w) => {
          const li = document.createElement("li");
          li.textContent = `${w.en} - ${w.vi}`;
          list.appendChild(li);
        });
      }

      function startGame() {
        currentQuestion = 0;
        lives = 5;
        gameWords = shuffleArray([...words]).slice(0, 20);
        document.getElementById("summary").textContent = "";
        document.getElementById("end-buttons").style.display = "none";
        document.getElementById("question-box").style.display = "block";
        nextQuestion();
      }

      function nextQuestion() {
        if (lives <= 0 || currentQuestion >= gameWords.length) return endGame();
        const q = gameWords[currentQuestion];
        const isEnToVi = Math.random() > 0.5;
        const correct = isEnToVi ? q.vi : q.en;
        const questionText = isEnToVi
          ? `T·ª´ "${q.en}" nghƒ©a l√† g√¨?`
          : `T·ª´ "${q.vi}" l√† g√¨ trong ti·∫øng Anh?`;
        document.getElementById(
          "status"
        ).textContent = `‚ù§Ô∏è M·∫°ng: ${lives} | üî¢ C√¢u: ${currentQuestion + 1}/${
          gameWords.length
        }`;
        document.getElementById("question").textContent = questionText;

        const allAnswers = shuffleArray([q, ...pickRandomWords(q, 3)]).map(
          (w) => (isEnToVi ? w.vi : w.en)
        );

        const answerBox = document.getElementById("answers");
        answerBox.innerHTML = "";
        allAnswers.forEach((ans) => {
          const btn = document.createElement("button");
          btn.textContent = ans;
          btn.onclick = () => {
            if (ans === correct) {
              currentQuestion++;
              nextQuestion();
            } else {
              showWrongAnswerPopup(() => {
                lives--;
                lives <= 0 ? endGame() : nextQuestion();
              });
            }
          };
          answerBox.appendChild(btn);
        });
      }

      function showWrongAnswerPopup(callback) {
        const popup = document.createElement("div");
        popup.style = `
        position: fixed; top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        background: #fff; color: #000;
        padding: 20px; border-radius: 10px;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
      `;
        popup.innerHTML = `
        <p>‚ùå B·∫°n ƒë√£ tr·∫£ l·ªùi sai!</p>
        <button style="margin-top:10px;padding:5px 15px;
          border:none;background:#333;color:#fff;
          border-radius:5px;cursor:pointer;">ƒê√≥ng</button>
      `;
        document.body.appendChild(popup);
        document
          .querySelectorAll("#answers button")
          .forEach((btn) => (btn.disabled = true));
        popup.querySelector("button").onclick = () => {
          document.body.removeChild(popup);
          callback();
          document
            .querySelectorAll("#answers button")
            .forEach((btn) => (btn.disabled = false));
        };
      }

      function endGame() {
        document.getElementById("question-box").style.display = "none";
        document.getElementById("status").textContent = "";
        document.getElementById(
          "summary"
        ).textContent = `üéâ K·∫øt th√∫c! B·∫°n tr·∫£ l·ªùi ƒë√∫ng ${currentQuestion} / ${gameWords.length} c√¢u.`;
        document.getElementById("end-buttons").style.display = "block";
      }

      function shuffleArray(arr) {
        return arr.sort(() => Math.random() - 0.5);
      }

      function pickRandomWords(exclude, count) {
        return shuffleArray(words.filter((w) => w !== exclude)).slice(0, count);
      }
    </script>
    <audio id="backgroundMusic" autoplay hidden></audio>
    <script>
      const musicMap = {
        5: ["music/folder5/yung kai - blue (Lyrics).mp3"],
        4: ["music/folder4/tous les m√™mes.mp3"],
        3: ["music/folder3/SLAVA.mp3"],
        2: ["music/folder2/7 Years.mp3"],
        1: ["music/folder1/Spider Dance.mp3"],
      };

      // H√†m ph√°t nh·∫°c t√πy theo s·ªë tim
      function playMusicByHeart(heartCount, questionNumber) {
        if (questionNumber >= 2 && heartCount >= 1 && heartCount <= 5) {
          const musicList = musicMap[heartCount];
          if (musicList && musicList.length > 0) {
            const randomIndex = Math.floor(Math.random() * musicList.length);
            const musicPath = musicList[randomIndex];

            const audio = document.getElementById("backgroundMusic");
            audio.src = musicPath;
            audio.play();
          }
        }
      }

      // C·∫≠p nh·∫≠t l·∫°i h√†m nextQuestion ƒë·ªÉ g·ªçi playMusicByHeart
      function nextQuestion() {
        if (lives <= 0 || currentQuestion >= gameWords.length) return endGame();

        // Ph√°t nh·∫°c theo s·ªë tim hi·ªán t·∫°i
        playMusicByHeart(lives, currentQuestion + 1);

        const q = gameWords[currentQuestion];
        const isEnToVi = Math.random() > 0.5;
        const correct = isEnToVi ? q.vi : q.en;
        const questionText = isEnToVi
          ? `T·ª´ "${q.en}" nghƒ©a l√† g√¨?`
          : `T·ª´ "${q.vi}" l√† g√¨ trong ti·∫øng Anh?`;
        document.getElementById(
          "status"
        ).textContent = `‚ù§Ô∏è M·∫°ng: ${lives} | üî¢ C√¢u: ${currentQuestion + 1}/${
          gameWords.length
        }`;
        document.getElementById("question").textContent = questionText;

        const allAnswers = shuffleArray([q, ...pickRandomWords(q, 3)]).map(
          (w) => (isEnToVi ? w.vi : w.en)
        );

        const answerBox = document.getElementById("answers");
        answerBox.innerHTML = "";
        allAnswers.forEach((ans) => {
          const btn = document.createElement("button");
          btn.textContent = ans;
          btn.onclick = () => {
            if (ans === correct) {
              currentQuestion++;
              nextQuestion();
            } else {
              showWrongAnswerPopup(() => {
                lives--;
                lives <= 0 ? endGame() : nextQuestion();
              });
            }
          };
          answerBox.appendChild(btn);
        });
      }
    </script>
  </body>
</html>
